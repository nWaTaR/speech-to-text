(this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]=this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]||[]).push([[0],{118:function(e,t,n){},127:function(e,t){},129:function(e,t){},137:function(e,t){},139:function(e,t){},173:function(e,t){},175:function(e,t){},180:function(e,t){},182:function(e,t){},206:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(101),i=n.n(o),s=(n(118),n(216)),c=n(3),l=function(e){var t=e.description,n=e.title;return Object(c.jsx)(s.a,{className:"header",children:Object(c.jsxs)("div",{className:"title-container",children:[Object(c.jsx)("h2",{className:"header-title",children:n}),Object(c.jsx)("p",{children:t})]})})};l.defaultProps={description:"",links:[],title:""};var u=l,d=n(5),p=n(7),f=n.n(p),y=n(13),b=n(18),m=n(59),g=n.n(m),S=n(102),h=n.n(S),j=n(209),x=n(214),O=n(211),v=n(212),w=n(217),k=n(218),A=n(103),T=n.n(A),P=n(36),I=function(e){var t=e.isRecording,n=e.isSamplePlaying,r=e.isUploadPlaying,o=e.keywordText,i=e.modelName,s=e.onError,l=e.onStartPlayingFileUpload,u=e.onStopPlayingFileUpload,p=e.onStartPlayingSample,m=e.onStopPlayingSample,g=e.onStartRecording,S=e.onStopRecording,h=e.useSpeakerLabels,j=Object(a.useState)([]),x=Object(b.a)(j,2),O=x[0],v=x[1];Object(a.useEffect)((function(){var e=[];o.length>0&&(e=o.split(",").map((function(e){return e.trim()}))),v(e)}),[o]);var A=P.find((function(e){return e.name===i})),I=A?A.filename:null,_=function(){var e=Object(y.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T()("/api/auth");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=9;break}return s(n),e.abrupt("return",{error:n});case 9:return a={},r=O.map((function(e){return e.toLowerCase()})),a=Object(d.a)(Object(d.a)({},a),{},{url:n.url||void 0,accessToken:n.accessToken,format:!0,keywords:O.length>0?r:void 0,keywordsThreshold:O.length>0?.01:void 0,model:i,objectMode:!0,play:!0,realtime:!0,resultsBySpeaker:h,speakerlessInterim:!0,timestamps:!0}),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{file:"audio/".concat(I)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return t=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{resultsBySpeaker:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(y.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{file:t,resultsBySpeaker:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"submit-container",children:[n?Object(c.jsx)(w.a,{className:"submit-button",kind:"tertiary",onClick:m,children:"Stop audio sample"}):Object(c.jsx)(w.a,{className:"submit-button",disabled:!i,kind:"tertiary",onClick:Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:(t=e.sent).error||p(t);case 4:case"end":return e.stop()}}),e)}))),children:"Play audio sample"}),t?Object(c.jsx)(w.a,{className:"submit-button",kind:"tertiary",onClick:S,children:"Stop recording"}):Object(c.jsx)(w.a,{className:"submit-button",disabled:!i,kind:"tertiary",onClick:Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:(t=e.sent).error||g(t);case 4:case"end":return e.stop()}}),e)}))),children:"Record your own"}),r?Object(c.jsx)(w.a,{className:"submit-button",kind:"tertiary",onClick:u,children:"Stop playing"}):Object(c.jsx)(k.a,{accept:["audio/wav","audio/mpeg","audio/flac","audio/opus"],buttonKind:"tertiary",className:"submit-button",disabled:!i,disableLabelChanges:!0,labelText:"Upload file",onChange:function(){var e=Object(y.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.files[0],e.next=3,U(n);case 3:(a=e.sent).error||l({recognizeConfig:a,keywords:O});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})};I.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,keywordText:"",modelName:null,onError:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){},useSpeakerLabels:!1};var _=I,E=function(e){var t=e.isRecording,n=e.isSamplePlaying,r=e.isUploadPlaying,o=e.onError,i=e.onSelectNewModel,l=e.onStartPlayingFileUpload,u=e.onStopPlayingFileUpload,d=e.onStartPlayingSample,p=e.onStopPlayingSample,f=e.onStartRecording,y=e.onStopRecording,m=P.map((function(e){return{id:e.name,label:e.description,supportsSpeakerLabels:e.supported_features.speaker_labels}})),g=Object(a.useState)(m[0]),S=Object(b.a)(g,2),h=S[0],w=S[1],k=Object(a.useState)(P[0].keywords),A=Object(b.a)(k,2),T=A[0],I=A[1],E=Object(a.useState)(!1),R=Object(b.a)(E,2),U=R[0],C=R[1];return Object(c.jsxs)(s.a,{className:"control-container",children:[Object(c.jsx)("h3",{className:"container-title",children:"Input"}),Object(c.jsx)(j.a,{legendText:"Language model",children:Object(c.jsx)(x.a,{id:"language-model-dropdown",label:"Select a language model",onChange:function(e){w(e.selectedItem);var t=P.find((function(t){return t.name===e.selectedItem.id})).keywords;I(t),U&&!e.selectedItem.supportsSpeakerLabels&&C(!1),i()},items:m,selectedItem:h&&h.label,defaultText:"Select a language model",ariaLabel:"Language selection dropdown",light:!0})}),Object(c.jsx)(j.a,{legendText:"Keywords to spot",children:Object(c.jsx)(O.a,{id:"custom-keyword-input",labelText:"Custom language keyword input",placeholder:"Enter custom language keywords",hideLabel:!0,invalidText:"Invalid keywords provided",value:T,onChange:function(e){console.log("keyword 2",e.target.value),I(e.target.value)},light:!0})}),Object(c.jsx)(j.a,{legendText:"Detect multiple speakers (only supported with sample audio)",children:Object(c.jsx)(v.a,{id:"speaker-label-toggle","aria-label":"Speaker label toggle",disabled:!h||!h.supportsSpeakerLabels,toggled:U,onToggle:function(){C(!U)}})}),Object(c.jsx)(_,{isRecording:t,isSamplePlaying:n,isUploadPlaying:r,keywordText:T,modelName:h&&h.id,onError:o,onStartPlayingFileUpload:l,onStopPlayingFileUpload:u,onStartPlayingSample:d,onStopPlayingSample:p,onStartRecording:f,onStopRecording:y,useSpeakerLabels:U})]})};E.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,onError:function(){},onSelectNewModel:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){}};var R=E,U=n(2),C=n.n(U),N=n(213),D=function(e){var t=e.confidence,n=e.startTime,a=e.endTime;return Object(c.jsxs)("div",{className:"keyword-tooltip",children:[Object(c.jsxs)("p",{children:["Confidence: ",t]}),Object(c.jsxs)("p",{children:[n,"s - ",a,"s"]})]})},L=n(41),z=function(e,t,n){var a=[];if(t.length>0){var r=function(e){var t=[];e.forEach((function(e){t=[].concat(Object(L.a)(t),Object(L.a)(Object.keys(e)))}));var n=t.map((function(e,n){return n!==t.length-1?"".concat(e,"|"):e})).reduce((function(e,t){return e+t}),"");return new RegExp("(".concat(n,")(?!')"),"gi")}(t);a=e.split(r)}if(0===a.length)return[{text:e,type:"normal"}];var o={};return a.map((function(e,a){var r=e.toLowerCase();if(a%2===0)return{text:e,type:"normal"};var i=t[n]&&t[n][r],s=0;o[r]?(s=o[r],o[r]+=1):o[r]=1;var c=i&&i[s];return c?{text:e,type:"keyword",startTime:c.start_time,endTime:c.end_time,confidence:c.confidence}:{}}))},M=function(e){var t=e.keywordInfo,n=e.transcriptArray;return Object(c.jsx)("div",{className:"transcript-box",children:n.map((function(e,n){var a=e.speaker,r=e.text,o=z(r,t,n);return Object(c.jsxs)("div",{children:[null!==a&&Object(c.jsx)("span",{className:"speaker-label--".concat(a),children:"Speaker ".concat(a,": ")}),o.map((function(e,t){return e?"normal"===e.type?Object(c.jsx)("span",{children:"".concat(e.text)},"transcript-text-".concat(n,"-").concat(t)):"keyword"===e.type?Object(c.jsx)(N.a,{align:"center",direction:"top",tooltipText:Object(c.jsx)(D,{confidence:e.confidence,startTime:e.startTime,endTime:e.endTime}),triggerClassName:"keyword-info-trigger",children:e.text},"transcript-keyword-".concat(n,"-").concat(t)):null:null}))]},"transcript-".concat(n))}))})};M.defaultProps={keywordInfo:[],transcriptArray:[]};var B=M,F=n(105),J=n(106),G=n(108),Y=n(107),W=function(e){Object(G.a)(n,e);var t=Object(Y.a)(n);function n(e){var a;return Object(F.a)(this,n),(a=t.call(this,e)).speechToTextCanvasRef=r.a.createRef(),a.speechToTextCanvasCtx=null,a.animationFrameId=null,a}return Object(J.a)(n,[{key:"componentDidMount",value:function(){console.log("props 1: ",this.props)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props.speechText,t=JSON.stringify(this.props.speechAnalyzer);return Object(c.jsxs)("div",{className:"speechToText",children:[Object(c.jsx)("p",{children:e}),Object(c.jsx)("p",{children:t})]})}}]),n}(r.a.Component);W.defaultProps={speechText:"",speechAnalyzer:[]};var Z=W,V=function(e){var t=e.keywordInfo,n=e.transcriptArray,a=e.speechText,r=e.speechAnalyzer;return Object(c.jsxs)(s.a,{className:"output-container",children:[Object(c.jsx)("h3",{className:"container-title",children:"Output"}),Object(c.jsx)(j.a,{legendText:"Transcript",children:Object(c.jsx)(B,{keywordInfo:t,transcriptArray:n})}),Object(c.jsx)(j.a,{legendText:"DetectionPosition",children:Object(c.jsx)(Z,{speechText:a,speechAnalyzer:r})})]})};console.log("speech output: ",C.a.arrayOf(C.a.object)),V.defaultProps={audioDataArray:[],audioDuration:0,audioSource:"",isTranscribing:!1,keywordInfo:[],transcriptArray:[],speechText:"",speechAnalyzer:[]};var K=V,X=n(215),q="notificationHasBeenSeen",H=function(e){var t=e.caption,n=e.children,r=e.className,o=e.hideAfterFirstDisplay,i=e.hideCloseButton,s=e.iconDescription,l=e.kind,u=e.lowContrast,d=e.onCloseButtonClick,p=e.role,f=e.subtitle,y=e.timeout,m=e.title,g=Object(a.useState)(),S=Object(b.a)(g,2),h=S[0],j=S[1],x=Object(a.useState)(!1),O=Object(b.a)(x,2),v=O[0],w=O[1];return Object(a.useEffect)((function(){j(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))}),[]),Object(a.useEffect)((function(){var e=document.querySelector(".custom-toast-".concat(h));e&&(e.className+="enter")}),[h]),Object(a.useEffect)((function(){o&&void 0!==typeof window&&void 0!==typeof window.localStorage&&"true"===window.localStorage.getItem(q)&&w(!0)}),[o]),v?null:Object(c.jsx)(X.a,{caption:t,className:"custom-toast-".concat(h," ").concat(r),hideCloseButton:i,iconDescription:s,kind:l,lowContrast:u,onCloseButtonClick:function(){o&&void 0!==typeof window&&void 0!==typeof window.localStorage&&window.localStorage.setItem(q,"true"),d()},role:p,subtitle:f,timeout:y,title:m,children:n})};H.defaultProps={caption:"",children:null,className:"",hideAfterFirstDisplay:!0,hideCloseButton:!1,iconDescription:"closes notification",kind:"error",lowContrast:!1,onCloseButtonClick:function(){},role:"alert",subtitle:"",timeout:0,title:""};var $=H,Q={setAudioAnalyzer:"SET_AUDIO_ANALYZER",setAudioContext:"SET_AUDIO_CONTEXT",setAudioSource:"SET_AUDIO_SOURCE",setAudioStream:"SET_AUDIO_STREAM",setAudioVisualizationData:"SET_AUDIO_VISUALIZATION_DATA",setError:"SET_ERROR",setSpeakerLabels:"SET_SPEAKER_LABELS",setIsRecording:"SET_IS_RECORDING",setIsSamplePlaying:"SET_IS_SAMPLE_PLAYING",setIsTranscribing:"SET_IS_TRANSCRIBING",setIsUploadPlaying:"SET_IS_UPLOAD_PLAYING",updateResults:"UPDATE_RESULTS",setResTextAnalyzer:"SET_RES_TEXT_ANALYZER"},ee={audioAnalyzer:{},audioContext:null,audioDataArray:[],audioDurationInMs:0,audioSource:"",audioStream:null,error:null,isRecording:!1,isSamplePlaying:!1,isTranscribing:!1,isUploadPlaying:!1,keywordInfo:[],speakerLabels:[],transcript:[],speechText:"",speechAnalyzer:[]},te=function(e,t){switch(t.type){case"SET_AUDIO_ANALYZER":return Object(d.a)(Object(d.a)({},e),{},{audioAnalyzer:t.audioAnalyzer});case"SET_AUDIO_CONTEXT":return Object(d.a)(Object(d.a)({},e),{},{audioContext:t.audioContext});case"SET_AUDIO_SOURCE":return Object(d.a)(Object(d.a)({},e),{},{audioSource:t.audioSource});case"SET_AUDIO_STREAM":return Object(d.a)(Object(d.a)({},e),{},{audioStream:t.audioStream});case"SET_AUDIO_VISUALIZATION_DATA":return Object(d.a)(Object(d.a)({},e),{},{audioDataArray:t.audioDataArray,audioDurationInMs:t.audioDurationInMs});case"SET_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.error});case"SET_IS_RECORDING":return Object(d.a)(Object(d.a)({},e),{},{isRecording:t.isRecording});case"SET_IS_SAMPLE_PLAYING":return Object(d.a)(Object(d.a)({},e),{},{isSamplePlaying:t.isSamplePlaying});case"SET_IS_TRANSCRIBING":return Object(d.a)(Object(d.a)({},e),{},{isTranscribing:t.isTranscribing});case"SET_IS_UPLOAD_PLAYING":return Object(d.a)(Object(d.a)({},e),{},{isUploadPlaying:t.isUploadPlaying});case"SET_SPEAKER_LABELS":return Object(d.a)(Object(d.a)({},e),{},{speakerLabels:t.speakerLabels});case"UPDATE_RESULTS":var n=Object(L.a)(e.transcript);return 0===t.resultIndex?n=t.transcript:n[t.resultIndex]=t.transcript[0],Object(d.a)(Object(d.a)({},e),{},{keywordInfo:t.keywordInfo,transcript:n});case"SET_RES_TEXT_ANALYZER":return console.log("action set res text",t.speechAnalyzer,e),Object(d.a)(Object(d.a)({},e),{},{speechText:t.speechText,speechAnalyzer:t.speechAnalyzer});default:throw new Error}},ne=2,ae=function(e){var t=new FileReader;return new Promise((function(n,a){t.onload=function(){var e=t.result;n(e)},t.onerror=function(){t.abort(),a(new Error("failed to process file"))},t.readAsArrayBuffer(e)}))},re=function(){var e=Object(y.a)(f.a.mark((function e(t,n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:return r=e.sent,o=new Uint8Array(r.slice(0)),e.abrupt("return",new Promise((function(e,t){n.decodeAudioData(r,(function(t){for(var n=t.duration,r=a-2*ne,i=Math.floor(r/2),s=o.length/i,c=[],l=1;l<i;l+=1){var u=l-1;u<0&&(u=0),c.push(o.slice(u*s,l*s))}var d=c.map((function(e){return e.reduce((function(e,t){return e+t}))/(255*s)}));e({duration:n,reducedFloatArray:d})}),(function(){t(new Error("failed to chunk audio"))}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),oe=function(e,t){return{title:e,description:t}},ie=n(37),se=n.n(ie);se.a.defaults.baseURL="https://backend-nishiki-watson-speech-to-text-backend.itzroks-120000mck6-ufxk6m-6ccd7f378ae819553d37d5f2ee142bd6-0000.us-south.containers.appdomain.cloud",se.a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",se.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",se.a.defaults.withCredentials=!0;var ce=se.a,le=function(){var e=Object(a.useReducer)(te,ee),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=new(window.AudioContext||window.webkitAudioContext),t=e.createAnalyser();r({audioAnalyzer:t,type:Q.setAudioAnalyzer}),r({audioContext:e,type:Q.setAudioContext})}),[]);var i=function(e){if(e.speaker_labels)r({speakerLabels:e.speaker_labels,type:Q.setSpeakerLabels});else{var t=function(e){var t=e.results,n=e.result_index,a=[],r=[],o=!1;return t.forEach((function(e){var t=e.final,n=null,i=null,s=null;t?(n=e.alternatives,i=e.speaker,s=e.keywords_result):(n=e.alternatives,i=e.speaker);var c=n,l=Object(b.a)(c,1)[0].transcript;void 0===i&&(i=null),r.push({final:t,speaker:i,text:l}),o=t,s&&a.push(s)})),{transcript:r,keywordInfo:a,resultIndex:n,final:o}}(e),n=t.transcript,a=t.keywordInfo,o=t.resultIndex;r({keywordInfo:a,resultIndex:o,transcript:n,type:Q.updateResults})}},s=function(){n.audioStream&&n.audioStream.stop(),r({isTranscribing:!1,type:Q.setIsTranscribing}),r({isUploadPlaying:!1,type:Q.setIsUploadPlaying}),r({isSamplePlaying:!1,type:Q.setIsSamplePlaying}),r({isRecording:!1,type:Q.setIsRecording})},l=function(){var e=Object(y.a)(f.a.mark((function e(t){var a,i,s,c,l,u,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,o&&o.current&&o.current.clientWidth&&(a=o.current.clientWidth),i=a||300,s=t instanceof File,e.prev=4,c=null,!s){e.next=10;break}c=t,e.next=16;break;case 10:return e.next=12,fetch(t);case 12:return l=e.sent,e.next=15,l.blob();case 15:c=e.sent;case 16:return e.next=18,re(c,n.audioContext,i);case 18:u=e.sent,d=u.reducedFloatArray,p=u.duration,r({audioDataArray:d,audioDurationInMs:1e3*p,type:Q.setAudioVisualizationData}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),r({error:oe("File upload error","There was a problem trying to read the file."),type:Q.setError});case 27:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(f.a.mark((function e(t){var a,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r({error:oe("No microphone detected","Cannot transcribe from microphone."),type:Q.setError});case 10:return o=h()(Object(d.a)(Object(d.a)({},t),{},{mediaStream:a,keepMic:!0})),a&&((i=n.audioAnalyzer).fttSize=2048,r({audioAnalyzer:i,type:Q.setAudioAnalyzer}),n.audioContext.createMediaStreamSource(a).connect(n.audioAnalyzer)),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){e.on("data",(function(e){i(e)})).on("end",(function(){s()})).on("error",(function(){r({error:oe("Audio transcription error","There was an error trying to read the audio data. Please try again."),type:Q.setError}),s()})),r({isTranscribing:!0,type:Q.setIsTranscribing})},m=function(){n.audioStream&&(n.audioStream.stop(),n.audioStream.removeAllListeners(),n.audioStream.recognizeStream.removeAllListeners()),n.audioContext&&"suspended"===n.audioContext.state&&n.audioContext.resume()},S=function(){var e=Object(y.a)(f.a.mark((function e(t){var n,a,o,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.recognizeConfig,a=t.keywords,m(),o=new FormData,console.log("keyword service",a,n),i=ce.defaults.baseURL+"/watson-speech-to-text/detection/".concat(a),o.append("audio",n.file),e.next=8,ce.post(i,o).then((function(e){return console.log("response: ",e),r({speechText:e.data.speechText,type:Q.setResSpeechText}),r({speechAnalyzer:e.data.search,type:Q.setResTextAnalyzer}),e})).catch((function(e){console.error(e)}));case 8:return s=g()(n),e.next=11,l(n.file);case 11:r({isUploadPlaying:!0,type:Q.setIsUploadPlaying}),r({isSamplePlaying:!1,type:Q.setIsSamplePlaying}),r({isRecording:!1,type:Q.setIsRecording}),r({audioSource:"upload",type:Q.setAudioSource}),r({audioStream:s,type:Q.setAudioStream}),p(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(y.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),n=g()(t),e.next=4,l(t.file);case 4:r({isSamplePlaying:!0,type:Q.setIsSamplePlaying}),r({isUploadPlaying:!1,type:Q.setIsUploadPlaying}),r({isRecording:!1,type:Q.setIsRecording}),r({audioSource:"sample",type:Q.setAudioSource}),r({audioStream:n,type:Q.setAudioStream}),p(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(y.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.next=3,u(t);case 3:n=e.sent,r({isRecording:!0,type:Q.setIsRecording}),r({isSamplePlaying:!1,type:Q.setIsSamplePlaying}),r({isUploadPlaying:!1,type:Q.setIsUploadPlaying}),r({audioSource:"microphone",type:Q.setAudioSource}),r({audioStream:n,type:Q.setAudioStream}),p(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"service-container",children:[Object(c.jsx)($,{kind:"info",subtitle:"This system is for demonstration purposes only and is not intended to process Personal Data. No Personal Data is to be entered into this system as it may not have the necessary controls in place to meet the requirements of the General Data Protection Regulation (EU) 2016/679."}),n.error&&Object(c.jsx)($,{kind:"error",title:n.error.title,subtitle:n.error.description,hideAfterFirstDisplay:!1,timeout:1e5,onCloseButtonClick:function(){return r({error:null,type:Q.setError})}}),Object(c.jsx)(R,{isRecording:n.isRecording,isSamplePlaying:n.isSamplePlaying,isUploadPlaying:n.isUploadPlaying,onError:function(e){r({error:e,type:Q.setError})},onSelectNewModel:function(){r({audioDataArray:[],audioDurationInMs:0,type:Q.setAudioVisualizationData}),r({keywordInfo:[],resultIndex:0,transcript:[],type:Q.updateResults})},onStartPlayingFileUpload:S,onStopPlayingFileUpload:function(){s(),r({isUploadPlaying:!1,type:Q.setIsUploadPlaying})},onStartPlayingSample:j,onStopPlayingSample:function(){s(),r({isSamplePlaying:!1,type:Q.setIsSamplePlaying})},onStartRecording:x,onStopRecording:function(){s(),r({isRecording:!1,type:Q.setIsRecording})}}),Object(c.jsx)(K,{audioAnalyzer:n.audioAnalyzer,audioDataArray:n.audioDataArray,audioDuration:n.audioDurationInMs,audioSource:n.audioSource,audioWaveContainerRef:o,isTranscribing:n.isTranscribing,keywordInfo:n.keywordInfo,transcriptArray:n.transcript,speechText:n.speechText,speechAnalyzer:n.speechAnalyzer})]})},ue=function(e){Object(a.useEffect)((function(){var t=document.createElement("script");return t.src=e,t.async=!0,document.body.appendChild(t),function(){document.body.removeChild(t)}}),[e])},de=function(){return ue("https://cdn.jsdelivr.net/gh/watson-developer-cloud/watson-developer-cloud.github.io@master/analytics.js"),Object(c.jsxs)("div",{className:"app-container",children:[Object(c.jsx)(u,{description:"IBM Watson Speech to Text is a cloud-native API that transforms voice into written text.",title:"Watson Speech to Text"}),Object(c.jsx)(le,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(c.jsx)(de,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e){e.exports=JSON.parse('[{"name":"ja-JP_BroadbandModel","language":"ja-JP","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ja-JP_BroadbandModel","rate":16000,"filename":"ja-JP_Broadband-sample.wav","keywords":"\u3059\u308b","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Japanese (16khz Broadband)"},{"name":"ja-JP_NarrowbandModel","language":"ja-JP","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ja-JP_NarrowbandModel","rate":8000,"filename":"ja-JP_Narrowband-sample.wav","keywords":"\u3054\u4f4f\u6240, \u3054\u672c\u4eba, \u751f\u5e74\u6708\u65e5","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Japanese (8khz Narrowband)"},{"name":"en-US_BroadbandModel","language":"en-US","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-US_BroadbandModel","rate":16000,"filename":"en-US_Broadband-sample.wav","keywords":"IBM, admired, AI, transformations, cognitive","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"US English (16khz Broadband)"},{"name":"en-US_NarrowbandModel","language":"en-US","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-US_NarrowbandModel","rate":8000,"filename":"en-US_Narrowband-sample.wav","keywords":"course online, four hours, help","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"US English (8khz Narrowband)"}]')}},[[206,1,2]]]);
//# sourceMappingURL=main.7b9b0cf3.chunk.js.map